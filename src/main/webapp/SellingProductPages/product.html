<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" rel="stylesheet">
    <title>blackwoodalley</title>
    <link rel="stylesheet" href="/blackwoodalley-web/assets/css1/product.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
</head>

<body>

    <header>

        <!-- header starts -->
        <!--  communicate-us ends -->

        </div>

        </div>

        <div class="navigate">
            <div class="sub-logo">
                <a href="../../index.html"><img class="logo" src="../../assets/images/index_page/logo.png" alt="logo_for_webpage"></a>
            </div>
            <div class="sub-navigate">
                <ul>

                    <li>
                        <a class="service" href="">About</a>
                        <div class="sub-service">

                            <ul>
                                <li>
                                    <a class="sub-service1" href="../../pages/about.html">About us</a>
                                </li>
                                <li>
                                    <a class="sub-service1" href="../../pages/restore/restore.html">How we restore</a>
                                </li>

                            </ul>
                        </div>

                    </li>
                    <li>
                        <a class="service" href="">Service</a>
                        <div class="sub-service">
                            <ul>
                                <li>
                                    <a class="sub-service1" href="../../pages/service/service2.html">Repair electronics</a>
                                </li>
                                <li>
                                    <a class="sub-service1" href="../../pages/service/service1.html">Repair furniture</a>
                                </li>
                                <li>
                                    <a class="sub-service1" href="../../pages/product/product.html">Buy</a>
                                </li>

                            </ul>

                        </div>
                    </li>
                    <li>
                        <a class="navi" href="../../pages/contact.html">Contact us</a>
                    </li>
                    <li>
                        <a class="navi" href="../../pages/track/track.html">Track request</a>
                    </li>
                    <li id="insert_login"></li>
                    <!-- <li><a class="navi" href="./pages/request.html">Restore</a></li> -->
                    <li id="admin">
                        <!-- <a class="service" href="">Admin</a>
                        <div class="sub-service">
                            <ul>
                                <li><a class="sub-service1" href="./pages/product_enter.html">product enter</a>
                                </li>
                                <li><a class="sub-service1" href="./pages/repairer_page.html">repairer page</a>
                                </li>

                            </ul>

                        </div> -->
                    </li>
                    <li id="insert_profile"></li>
                    <li id="login"></li>
                    <li>
<!-- <a class="navi-button" href="../../pages/request.html">Request a quote</a> -->
                    <li class="icons">
                        <a href="../../pages/product/product_add_cart.html">
                            <div id="cart_count">0</div>
                            <i class="fa-solid fa-cart-shopping" id="shopping"></i>
                        </a>
                    </li>
                    <li class="icons">
                        <a href="../../pages/product/product_favourite.html">
                            <div id="fav_count">0</div>
                            <i class="fa-solid fa-heart" id="liked"></i>
                        </a>
                    </li>
                    <li class="icons">
                        <a href="../../pages/product/order_history.html">
                            <!-- <div id="fav_count">0</div> -->
                            <i class="fa-solid fa-clock-rotate-left" id="history_icon"
                            ></i>
                        </a>
                    </li>

                </ul>
            </div>

        </div>
        <!-- menu-bar ends -->

    </header>


        <input type="search" id="search" placeholder="search">


    <div class="product_page">

        <!-- 
      
        <div class="gallery_box">
              <a  href="../product_detail.html" id="pic">
            <img class="gallery_imgs" src="../../assets/images/service1_page/before1.png" alt="antique">
              </a> 
             <h2 class="product_name">chair</h2>
            <p class="detail">This is 200 years old</p>
            <div class="rating">

                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star-half-stroke"></i>

            </div>
            <p class="price">&#8377; 23,000</p> 
<label>
            <input type="checkbox" class="favourite" />
            <span class="favourite_symbol">&#10084;</span>
          </label>
        </div> -->

    </div>
    <footer>
        <div class="container">
            <div class="row">
                <div class="footer-col">
                    <p>company</p>
                    <ul>
                        <li>
                            <a href="./pages/about.html">about us</a>
                        </li>
                        <li>
                            <a href="./pages/service/service1.html">our services</a>
                        </li>

                    </ul>
                </div>
                <div class="footer-col">
                    <p>get help</p>
                    <ul>
                        <li>
                            <a href="./pages/contact.html#faqs">FAQ</a>
                        </li>
                        <li>
                            <a href="./pages/request.html">Request a quote</a>
                        </li>

                    </ul>
                </div>

                <div class="footer-col">
                    <p>contact us</p>
                    <ul>
                        <li>
                            <a href="./pages/contact.html">Phone us</a>
                        </li>
                        <li>
                            <a href="./pages/contact.html">Email us</a>
                        </li>
                        <li>
                            <a href="./pages/contact.html">Reach us directly</a>
                        </li>

                    </ul>
                </div>

                <div class="footer-col">
                    <p>follow us</p>
                    <div class="social-links">
                        <a href="https://facebook.com" aria-label="facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://twitter.com" aria-label="twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://instagram.com" aria-label="instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://pinterest.com" aria-label="linkedin">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <a href="" class="arrow" aria-label="down-arrow">
            <i class="fa-sharp fa-solid fa-circle-chevron-up"></i>
        </a>
    </footer>
    <script src="../javascript/product.js">
// const div_1 = document.createElement("div")
// div_1.setAttribute("class","outer-box")
// document.querySelector(".furniture-imgs").prepend(div_1)

// const a =document.createElement("anchor")
// a.setAttribute("href","../../pages/request.html")
// document.querySelector(".outer-box").append(a)

// const img = document.createElement("img")
// img.setAttribute("src",data[i]["image"]["src"])
// img.setAttribute("class","furniture")
// img.setAttribute("alt","antique")
// document.querySelector("anchor").append(img)

// const h3 = document.createElement("h3")
// h3.innerText = data[i]["h3"]
// document.querySelector("anchor").append(h3)

// for(let i=0; i<products);

const cart_arr = JSON.parse(localStorage.getItem("wishlist")) || [];

const favourites = JSON.parse(localStorage.getItem("favourite")) || [];

const products = JSON.parse(localStorage.getItem("product_detail"));

const user_detail = JSON.parse(localStorage.getItem("user_list"));

const last_email = localStorage.getItem("logged_in");

const order_count = document.getElementById("cart_count");

const favourite_count = document.getElementById("fav_count");

// console.log(order_count);

const product_arr = [];

for (let i = 0; i < products.length; i++) {
  if (products[i].status) {
    product_arr.push(products[i]);
  }
}

function list_product(array = []) {
  array.forEach((item) => {
    const gallery_box = document.createElement("div");
    gallery_box.setAttribute("class", "gallery_box");

    const href_link = `../product/product_detail.html?prod_id=${item.productid}`;

    const div_1 = document.createElement("div");
    div_1.setAttribute("id", "pic");
    gallery_box.append(div_1);

    const anchor_1 = document.createElement("a");
    anchor_1.setAttribute("href", href_link);
    // anchor_1.setAttribute("id","pic")
    div_1.append(anchor_1);

    const gallery_imgs = document.createElement("img");
    gallery_imgs.setAttribute("class", "gallery_imgs");
    gallery_imgs.setAttribute("src", item.pr_img_1);
    gallery_imgs.setAttribute("id", "product_img");
    gallery_imgs.setAttribute("alt", "antique");
    // document.querySelector(".gallery_box").append(gallery_imgs)
    anchor_1.append(gallery_imgs);

    const heading_2 = document.createElement("h2");
    heading_2.setAttribute("class", "product_name");
    heading_2.innerText = item.product_name;
    // document.querySelector(".gallery_box").append(heading_2)
    gallery_box.append(heading_2);

    const paragraph_1 = document.createElement("p");
    paragraph_1.setAttribute("class", "detail");
    paragraph_1.innerText = item.highlights;
    // document.querySelector(".gallery_box").append(paragraph_1)
    gallery_box.append(paragraph_1);

    const rating = document.createElement("div");
    rating.setAttribute("class", "rating");
    // document.querySelector(".gallery_box").append(rating)
    gallery_box.append(rating);

    const icon = document.createElement("div");
    icon.setAttribute("class", "star");
    // document.querySelector(".rating").append(icon)
    rating.append(icon);

    const products_star = item;
    const rating_round = Math.round(products_star.rating);
    let stars = "";
    for (let j = 0; j < rating_round; j++) {
      stars += `&#9733;`;
    }
    icon.innerHTML = stars;

    const paragraph_2 = document.createElement("p");
    paragraph_2.innerText = `â‚¹ ${item.product_price}`;
    paragraph_2.setAttribute("class", "price");
    // document.querySelector(".gallery_box").append(paragraph_2)
    gallery_box.append(paragraph_2);

    const add_to_card = document.createElement("button");
    add_to_card.innerText = "add to card";
    add_to_card.setAttribute("id", "add_to_card");
    gallery_box.append(add_to_card);

    const label1 = document.createElement("label");
    label1.setAttribute("id", "fav_click");
    gallery_box.append(label1);

    const input1 = document.createElement("input");
    input1.setAttribute("type", "checkbox");
    input1.setAttribute("id", "favourite");
    label1.append(input1);

    const span1 = document.createElement("div");
    span1.setAttribute("class", "favourite_symbol");
    span1.innerHTML = "&#10084;";
    label1.append(span1);

    document.querySelector(".product_page").append(gallery_box);

    add_to_card.addEventListener("click", () => {
      // console.log(label1)
      if (last_email != "[]") {
        let cart_check = false;

        cart_arr.find((obj) => {
          if (last_email === obj.wishlist_email) {
            if (item.productid === obj.productid) {
              cart_check = true;
            }
          }

          return cart_check;
        });

        if (cart_check) {
          alert("Product was already added to add_to_cart");
        } else {
          cart_arr.push({
            wishlist_email: last_email,
            productid: item.productid,
            product_name: item.product_name,
            about_product: item.about_product,
            product_price: item.product_price,
            pr_img_1: item.pr_img_1,
            pr_img_2: item.pr_img_2,
            pr_img_3: item.pr_img_3,
            pr_img_4: item.pr_img_4,
            highlights: item.highlights,
            rating: item.rating,
            description: item.description,
            status: true,
          });

          localStorage.setItem("wishlist", JSON.stringify(cart_arr));

          alert("Product added to cart");
        }
      } else {
        alert("Please login to add product to cart");
      }
    });

    label1.addEventListener("click", () => {
      if (last_email != null) {
        let fav_check = false;

        favourites.find((obj) => {
          if (last_email === obj.favourite_email) {
            if (item.productid === obj.productid) {
              fav_check = true;
            }
          }

          return fav_check;
        });

        if (fav_check) {
          alert("Product was already added to wishlist");
        } else {
          favourites.push({
            favourite_email: last_email,
            productid: item.productid,
            product_name: item.product_name,
            about_product: item.about_product,
            product_price: item.product_price,
            pr_img_1: item.pr_img_1,
            pr_img_2: item.pr_img_2,
            pr_img_3: item.pr_img_3,
            pr_img_4: item.pr_img_4,
            highlights: item.highlights,
            rating: item.rating,
            description: item.description,
            status: true,
          });

          localStorage.setItem("favourite", JSON.stringify(favourites));

          alert("Added to Wishlist");
        }
      } else {
        alert("Please login to add product to wishlist");
      }

      // Check if the checkbox is checked
    });
  });
}
//

// fav_click.addEventListener("click",function(){
//     console.log(fav_click)
// })

const searchbox = document.getElementById("search");
searchbox.addEventListener("input", (e) => {
  const searchQuery = searchbox.value.trim().toLowerCase();
  // console.log(searchQuery);
  //   if (e.key === "Enter") {
  //     e.preventDefault();
  //   }
  const filteredList = products.filter((item) => {
    if (item.status) {
      return item.product_name.toLowerCase().includes(searchQuery);
    }
  });
  const parentHtmlDiv = document.querySelector(".product_page");
  parentHtmlDiv.innerHTML = "";
  list_product(filteredList);

});

list_product(product_arr);

user_detail.forEach((e) => {
  if (e.emailid == last_email) {
    order_count.innerHTML = e.count;
  }
});
user_detail.forEach((e) => {
  if (e.emailid == last_email) {
    favourite_count.innerHTML = e.favourite_count;
  }
});
document.getElementById("favourite").addEventListener("click",function () {
  //check if checkbox is checked
  
      document.getElementById("favourite").setAttribute('disabled', true); //disable input
  
});


    </script>

</body>

</html>